# actionjdjackson/receipt-processor

I'm super excited about this programming challenge! I just learned Go over the
last two days, and have successfully developed my receipt processor and it works!

### To run the app as a docker container
To run this app as a docker container, browse to this directory and run:
```
docker build --tag actionjdjackson/receipt-processor
```
Then run the following command to start up the webservice:
```
docker run --publish 80:80 actionjdjackson/receipt-processor
```
### To run the app as a standalone command on your system
To run this app standalone, browse to this directory and run the following command:
```
go install actionjdjackson/receipt-processor
```
And then run the created app, called receipt-processor
```
receipt-processor
```
The app will host the web service on localhost:80

You may need to install gorilla/mux by running the following command
```
go get -u github.com/gorilla/mux
```

This Go app is intended to meet the following specifications:

### Endpoint: Process Receipts

* Path: `/receipts/process`
* Method: `POST`
* Payload: Receipt JSON
* Response: JSON containing an id for the receipt.

Description:

Takes in a JSON receipt (see example in the example directory) and returns a JSON object with an ID generated by your code.

The ID returned is the ID that should be passed into `/receipts/{id}/points` to get the number of points the receipt
was awarded.

How many points should be earned are defined by the rules below.

Reminder: Data does not need to survive an application restart. This is to allow you to use in-memory solutions to track any data generated by this endpoint.

Example Response:
```json
{ "id": "7fb1377b-b223-49d9-a31a-5a02701dd310" }
```

## Endpoint: Get Points

* Path: `/receipts/{id}/points`
* Method: `GET`
* Response: A JSON object containing the number of points awarded.

A simple Getter endpoint that looks up the receipt by the ID and returns an object specifying the points awarded.

Example Response:
```json
{ "points": 32 }
```

---

# Rules

These rules collectively define how many points should be awarded to a receipt.

* One point for every alphanumeric character in the retailer name.
* 50 points if the total is a round dollar amount with no cents.
* 25 points if the total is a multiple of `0.25`.
* 5 points for every two items on the receipt.
* If the trimmed length of the item description is a multiple of 3, multiply the price by `0.2` and round up to the nearest integer. The result is the number of points earned.
* 6 points if the day in the purchase date is odd.
* 10 points if the time of purchase is after 2:00pm and before 4:00pm.

# Testing

To test the app from the command line, try this:
```
curl -s -XPOST -d '{JSON FOR RECEIPT HERE}' http://localhost/receipts/process
```
With an example JSON from the listed examples:
```
curl -s -XPOST -d '{
  "retailer": "Target",
  "purchaseDate": "2022-01-01",
  "purchaseTime": "13:01",
  "items": [
    {
      "shortDescription": "Mountain Dew 12PK",
      "price": "6.49"
    },{
      "shortDescription": "Emils Cheese Pizza",
      "price": "12.25"
    },{
      "shortDescription": "Knorr Creamy Chicken",
      "price": "1.26"
    },{
      "shortDescription": "Doritos Nacho Cheese",
      "price": "3.35"
    },{
      "shortDescription": "   Klarbrunn 12-PK 12 FL OZ  ",
      "price": "12.00"
    }
  ],
  "total": "35.35"
}' http://localhost/receipts/process
```

which should return an id value like this:
```json
{"id":"8AiHS1AhkDNOmIPEvKYTgwPQ4Yfp0oNf"}
```

and you can find the points value from command line (or in any browser) like this:
```
curl http://localhost/receipts/8AiHS1AhkDNOmIPEvKYTgwPQ4Yfp0oNf/points
```

which should return a points value like this:
```json
{"points":28}
```
